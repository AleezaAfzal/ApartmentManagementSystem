@{
    bool isAuthPage = ViewContext.RouteData.Values["Controller"]?.ToString() == "Account";
    var userName = User?.Identity?.Name ?? "Owner";
    var roleText = User?.IsInRole("Owner") == true ? "Owner" : "User";
}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>@ViewData["Title"] - Rentora (Owner)</title>
    <link href="~/assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet" />
    <link href="~/assets/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet" />
    <link href="~/assets/css/main.css" rel="stylesheet" />
    <link href="~/css/dashboard.css" rel="stylesheet" />
    <style>
        .owner-accent { --accent: #6b46ff; }
        .topbar { padding: 1rem; border-bottom: 1px solid #eef2f6; background: #fff; }
        .sidebar-profile { margin-top: auto; }
        .sidebar-toggle { position: absolute; top: 12px; right: -16px; width: 32px; height: 32px; background:#fff;border-radius:6px;box-shadow:0 2px 6px rgba(0,0,0,0.08);display:flex;align-items:center;justify-content:center;cursor:pointer }
    </style>
</head>
<body class="owner-accent">
    <div class="d-flex">
        <aside class="app-sidebar" id="appSidebar">
            <div style="position:relative;">
                <div class="sidebar-brand">Rentora</div>
                <div class="sidebar-toggle" id="sidebarToggle" title="Toggle sidebar"><i class="bi bi-chevron-left" id="sidebarToggleIcon"></i></div>
            </div>

            <nav class="sidebar-nav">
                <a asp-controller="Owner" asp-action="Dashboard" class="sidebar-link">Dashboard</a>
                <a asp-controller="Owner" asp-action="VisitRequests" class="sidebar-link">Visit Requests</a>
                <a asp-controller="Owner" asp-action="VenueBookings" class="sidebar-link">Venue Bookings</a>
                <a asp-controller="Owner" asp-action="Tenants" class="sidebar-link">Tenants</a>
                <a asp-controller="Owner" asp-action="Apartments" class="sidebar-link">Apartments</a>
                <a asp-controller="Owner" asp-action="Payments" class="sidebar-link">Payments</a>
                <a asp-controller="Owner" asp-action="Complaints" class="sidebar-link">Complaints</a>
                <a asp-controller="Owner" asp-action="Profile" class="sidebar-link">Profile</a>
            </nav>
            <div class="sidebar-footer sidebar-profile">
                <div class="small text-muted mb-2">Signed in as</div>
                <div class="fw-bold">@userName</div>
                <form asp-controller="Account" asp-action="Logout" method="post" class="mt-2">
                    <button class="btn btn-sm btn-outline-danger w-100">Logout</button>
                </form>
            </div>
        </aside>

        <main class="main with-sidebar" id="mainContent">
            <header class="topbar d-flex justify-content-between align-items-center">
                <div>
                    <h5 class="mb-0">@ViewData["Title"]</h5>
                </div>
                <div class="d-flex align-items-center gap-3">
                    <i class="bi bi-search"></i>
                    <i class="bi bi-bell"></i>

                    <a asp-controller="Owner" asp-action="Profile" title="Profile" class="d-flex align-items-center text-decoration-none text-dark">
                        <div class="profile-avatar bg-light rounded-circle d-flex align-items-center justify-content-center me-2" style="width:42px;height:42px;">@userName?.Substring(0,1).ToUpper()</div>
                        <div class="profile-info d-none d-md-block text-end">
                            <div class="profile-name fw-bold">@userName</div>
                            <div class="profile-role small text-muted">@roleText</div>
                        </div>
                    </a>
                </div>
            </header>

            <div class="container-fluid mt-4 content-inner">
                @RenderBody()
            </div>
        </main>
    </div>

    <script src="~/assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
    <script>
        (function(){
            const sidebar = document.getElementById('appSidebar');
            const main = document.getElementById('mainContent');
            const toggle = document.getElementById('sidebarToggle');
            const icon = document.getElementById('sidebarToggleIcon');
            const COLLAPSED_KEY = 'rentora_sidebar_collapsed_owner';

            function setCollapsed(collapsed){
                if(collapsed){
                    sidebar.classList.add('collapsed');
                    main.classList.add('with-sidebar-collapsed');
                    icon.classList.remove('bi-chevron-left'); icon.classList.add('bi-chevron-right');
                } else {
                    sidebar.classList.remove('collapsed');
                    main.classList.remove('with-sidebar-collapsed');
                    icon.classList.remove('bi-chevron-right'); icon.classList.add('bi-chevron-left');
                }
                try{ localStorage.setItem(COLLAPSED_KEY, collapsed ? '1' : '0'); }catch(e){}
            }

            toggle.addEventListener('click', function(){
                setCollapsed(!sidebar.classList.contains('collapsed'));
            });

            // initialize from storage
            try{
                const v = localStorage.getItem(COLLAPSED_KEY);
                if(v === '1') setCollapsed(true);
            }catch(e){}
        })();
    </script>
    @RenderSection("Scripts", required: false)
</body>
</html>